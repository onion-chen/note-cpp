# 运算符
认识了C++的基本数据类型后，接下来就要操作这些数据了。而要操作数据，就离不开运算符和表达式。包括赋值运算、算数运算、关系运算、逻辑运算、逗号运算、位运算、移位运算、sizeof运算等。

## 1. 表达式
C++中，表达式由运算符、操作数、括号等组成。简单的表达式只包含一个数值，复杂的表达式包含多个操作数和多个运算符。

C++中的运算符多数继承自C语言，新增的运算符仅有“::”(作用域运算符)和“->”(指向运算符)。根据操作数的数量，运算符可分为单目运算符、双目运算符和三目运算符。

复杂表达式中，运算符执行的先后顺序由它们的优先级和结合性决定。表达式的值的数据类型由运算符的种类和操作数的数据类型决定。

表达式可出现在赋值语句的右侧或函数的参数中。表达式可返回一个结果，其数据类型取决于组成表达式的变量和常量的类型。

程序中常常遇到的赋值符号“=”就是赋值运算符，其作用就是将一个数据赋值给一个变量。
```cpp
int age;
age = 10;
```
赋值表达式的一般形式为：数据类型 变量名 = 表达式。 

## 2. 算数运算符
算数运算符包括4个单目运算符和5个双目运算符。
|运算符|功能|用法|示例|
|:--:|:--:|:--:|:--:|
|+|取正值|---|+520|
|+|加法运算|x + y|1 + 2|
|-|取负值|---|-520|
|-|减法运算|x - y|5 - 2|
|*|乘法运算|x * y|2 * 5|
|/|除法运算|x / y|9 / 3|
|%|取模运算|x % y|5 % 2|
|++|自增|x++、++y|x++、++y|
|--|自减|x--、--y|x--、--y|

:::info
x，y表示使用运算符的对象，可以是表达式、变量或常量。

表达式求值时，会按照运算符的优先级别从高到低依次执行。单目正和单目负的优先级最高；“*”、“/”、“%”的优先级高于“+”、“-”；括号在所有运算符中优先级最高，可以改变运算顺序。当运算符的优先级相同时，结合方向为“自左向右”。这和数学中的计算顺序是一样的。
:::

## 3. 算数表达式
使用算数运算符的表达式称为算数表达式。
```cpp
(3 + 5) / Rate;
Top - Bottom + 1;
Height * Width;
```
进行四则混合运算时，不同的数据类型会先自动转化成同一类型，然后再进行运算。

1、若所有操作数的数据类型相同，则表达式运算结果的数据类型和操作数的数据类型相同。例如，两个整型数相加，其结果仍然是一个整型数。

2、若操作数的数据类型不同，则表达式运算结果的数据类型取最高的数据类型，以保证数据精度不会发生损失。例如，混合运算`10 + 'a' - 1.5 + 3.2 * 6`中出现了整型、字符型、浮点型，表达式的运算结果是浮点型。

### 3.1 自增、自减
自增运算符“++”和自减运算符“--”对变量的操作效果分别是使用变量增加1和减少1.

自增、自减运算符可以放在变量前面，如`++x`，这种情况称为前缀运算；也可以放在变量的后面，如`x--`，这种情况称为后缀运算。两者对运算结果的影响是不一样的。

-	前缀运算中，变量先完成自增或自减运算，再以增减后的结果参与表达式运算
-	后缀运算中，变量先参加表达式运算，之后再进行自增或自减

当自增、自减运算符出现在表达式内部，作为运算的一部分时，前缀和后缀的运算结果差异很大。
```cpp
#include <iostream>
int main() {
	int x = 10;
	int y = 20;
	int a, b;
	a = x++;			// x先赋值再自增，a为10
	b = ++y;			// y先自增在复制，b为21
	std::cout << a << std::endl;
	std::cout << b << std::endl;
	return 0;
}
```
**小练习：**
计算基本收益，某基金年利率为3.5%，现存入1万元本金，问一天后连本带利有多少钱。计算公式：一天收益 = 本金 * 年化利率 / 365;
:::details 解析
```cpp
#include<iostream>
int main() {
	double p = 3.5 / 100; 					// 年利率
	int x = 10000;									// 本金
	double result =  x + x * (1 * p / 365);		// 最终收益
	std::cout << result << std::endl;
	return 0;
}
```
:::

## 4. 关系运算符
关系运算符包括大于、大于或等于、小于、小于或等于、等于和不等六种运算符。
|运算符|描述|用法|说明|
|:--:|:--:|:--:|:--:|
|>|大于|x > y|前者大于后者，运算结果为真，否则为假|
|<|小于|x < y|前者小于后者，运算结果为真，否者为假|
|>=|大于或等于|x >= y|前者大于或等于后者，运算结果为真，否则为假|
|<=|小于或等于|x <= y|前者小于或等于后者，运算结果为真，否则为假|
|==|等于|x == y|前者等于后者，运算结果为真，否则为假|
|!=|不等于|x != y|前者不等于后者，运算结果为真，否则为假|

 